# TP2 - Spot-moi (20%)

ğŸğŸ“¦ Tout le HTML et le CSS de l'application vous sont fournis. [Cliquez ici](../../static/files/tp2_html_css.zip).

:::warning

Les fichiers de dÃ©part correspondent Ã  du HTML et Ã  du CSS vanille. Il faudra adapter le HTML et le CSS Ã  la structure
d'un projet **Next.js** ! (Diviser en composants, dÃ©placez les parties rÃ©pÃ©titives comme le `<header>` et `<footer>` dans un **layout**, etc.)
De plus, vous devrez dÃ©placer les images dans un dossier du projet Next.js et rÃ©parer les `src` des Ã©lÃ©ments `<img>`.

:::

## ğŸ“ Consignes

* â›” Remise partielle : **26 fÃ©vrier 17h59** (ou avant), **en classe**. [Explications ici](/tp/tp2#-remise-partielle)
* ğŸ“… Date de remise : **6 mars 23h59**
* ğŸŒ Le framework **Next.js** doit Ãªtre utilisÃ©.
* ğŸ‘¤ Le projet doit Ãªtre fait individuellement. Attention au plagiat.
* â° Vous avez 4 cours (12h en classe !) consacrÃ©s au TP, **profitez-en**. (_Narrator : "... and nobody did"_)
* ğŸ™ Vous devez utiliser au moins **4 composants**, c'est-Ã -dire un par page.
* ğŸ‘… L'application doit Ãªtre disponible en franÃ§ais et en anglais.

En rÃ©sumÃ©, nous rÃ©aliserons une **application Web client** permettant d'explorer des donnÃ©es musicales en utilisant les API **Spotify**, **Youtube** et **BandsInTown**. Nous utiliserons Ã©galement **Google Maps**.

Si vous avez du mal Ã  commencer le TP, suivez les instructions dens la section [ğŸ˜µ Ses tro compliquais](/tp/tp2#-ses-tro-compliquais).

:::danger
 
Si votre travail est suspectÃ© de plagiat (code copiÃ© d'un(e) autre Ã©tudiant(e), code gÃ©nÃ©rÃ© par IA, notions non abordÃ©es en classe, etc.), deux choses peuvent se produire :
 
* Le plagiat est prouvÃ© par nos outils : Note de 0, automatiquement.
* Le plagiat est plutÃ´t Ã©vident, mais une validation est requise : vous serez convoquÃ©(e) au bureau de votre enseignant(e). Vous devrez rÃ©pondre Ã  certaines questions pour prouver que vous comprenez et maÃ®trisez le code qui a Ã©tÃ© utilisÃ© dans votre TP. Si vous ne rÃ©ussissez pas Ã  rÃ©pondre Ã  certaines questions, vous aurez la note de 0. (Si vous ne comprenez pas votre propre code, c'est que vous avez plagiÃ©, d'une maniÃ¨re ou d'une autre.)
 
:::

## ğŸ‘¨â€ğŸ¨ğŸ‘©â€ğŸ¨ Page d'accueil

Ã€ partir de la page d'accueil, l'utilisateur pourra rechercher des artistes (API Spotify) pour les afficher. Rechercher un artiste
l'affiche et l'ajoute automatiquement aux Â« favoris Â». (Favoris veut simplement dire que si on rÃ©actualise la page, les artistes
recherchÃ©s resteront prÃ©sents) 

Il y aura Ã©galement un bouton pour nettoyer tous les artistes. (Tous les favoris) Sous chaque artiste, il y a un bouton pour aller vers
la **page des concerts de l'artiste** et un bouton pour aller vers la **page des albums de l'artiste**.

<center>![Page d'accueil et page des artistes](../../static/img/tp2/artists.png)</center>

## ğŸ’¿ Page des albums

Accessible en cliquant sur le bouton Â« **Albums** Â» sous un artiste de la page d'accueil.

* On affiche le titre Â« Albums de NOM_ARTISTE Â» en haut.
* On affiche tous les albums de l'artiste (titre et pochette) Ã  l'aide d'une requÃªte Ã  **Spotify**.
* Un bouton sous chaque album permet de naviguer vers la **page des chansons de l'album**.

<center>![Pages des albums](../../static/img/tp2/albums.png)</center>

## ğŸµ Page des chansons

Accessible en cliquant sur le bouton Â« **Chansons** Â» sous un album dans la page des albums.

* On affiche le titre Â« Chansons de NOM_ALBUM Â» en haut.
* On affiche le titre de toutes les chansons de l'album Ã  l'aide d'une requÃªte Ã  **Spotify**.
* Un bouton sous chaque chanson permet d'afficher la chanson dans un **lecteur YouTube** pour la faire jouer
Ã  l'aide de **l'API de YouTube**.
  * â›” N'envoyez pas de requÃªte pour une chanson qui n'a pas Ã©tÃ© cliquÃ©e !

<center>![Pages des chansons](../../static/img/tp2/songs.png)</center>

:::warning

Pour que la requÃªte YouTube fonctionne dans 99.99% des cas (ce qui est nÃ©cessaire pour ce TP), assurez-vous
de fournir le **nom de l'album** ET le **nom de la chanson** dans la phrase de recherche. Autrement, une chanson
avec un nom trop gÃ©nÃ©rique risque de donner un rÃ©sultat invalide.

:::

<center>![Pages des chansons avec lecteur YouTube](../../static/img/tp2/youtube.png)</center>

## ğŸ¤ Page des concerts

Accessible en cliquant sur le bouton Â« **Concerts** Â» sous un artiste dans la page d'accueil.

* On affiche le titre Â« Concerts de NOM_ARTISTE Â».
* On affiche tous les concerts (date et heure qui respectent la *locale*, mais pays et ville juste en anglais) Ã  l'aide de l'API **BandsInTown**.
    * ğŸ“¶ RequÃªte : `https://rest.bandsintown.com/artists/MON_ARTISTE/events?app_id=API_KEY`
    * ğŸ”‘ ClÃ© d'API fournie : `2b32475766802ac01eefda45e9e42ea0`
* On affiche une carte **Google** avec un marqueur pour chaque concert.
    * ğŸ‘» Affichez un **message spÃ©cial** sous la carte si l'artiste n'a aucun concert.
    * ğŸ’¡ Sachant que l'API **BandsInTown** vous fournit la latitude et longitude pour chaque concert, placer les marqueurs est possible facilement.

<center>![Pages des concerts](../../static/img/tp2/shows.png)</center>

:::warning

**BandsInTown** vous fournira la latitude et la longitude pour chaque concert... sous forme de `string`. N'oubliez pas
de convertir ces valeurs en `number` avec la fonction `parseFloat(monString)` ou avec l'opÃ©rateur `+` placÃ© devant la valeur.

:::

## ğŸ¤¬ Exigences supplÃ©mentaires

* ğŸ™ Vous devez utiliser au minimum **4 composants**, c'est-Ã -dire un par page.
* ğŸ‘… L'application doit Ãªtre disponible en franÃ§ais et en anglais. (16 textes Ã  traduire)
* ğŸ“¶ Il faut utiliser un **intercepteur** pour la gestion du **token Spotify**.
* âš™ La requÃªte de **connexion Ã  Spotify**, qui risque d'Ãªtre nÃ©cessaire dans 3 pages, doit Ãªtre dans un **hook** pour ne pas la rÃ©pÃ©ter !
* ğŸ’¾ Le **stockage local** a Ã©tÃ© utilisÃ© pour ranger les artistes dans les favoris.
* ğŸ”± Vous devez faire **au moins 8 commits** clairs. L'enseignant(e) doit Ãªtre invitÃ©(e) sur Git dÃ¨s le dÃ©but du TP.
* ğŸ“¦ Il est obligatoire d'utiliser au moins 3 classes : `Album`, `Artist` et `Show`.

## â›” Remise partielle

Avant le **26 fÃ©vrier 17h59**, en **classe**, il faut montrer Ã  l'enseignant(e) que vous avez terminÃ© la **page des artistes**. (Ceci n'inclut pas l'internationalisation) Si vous ne rÃ©alisez pas cette dÃ©monstration, **vous perdez 25%**.

## âœ… Grille de correction

<center>
|CritÃ¨re|Points|
|:-|:-|
|**âš™ Fonctionnement gÃ©nÃ©ral**<br/>* 4 composants sont utilisÃ©s.<br/>* Les classes `Album`, `Artist` et `Show` existent et sont utilisÃ©es.<br/>* Les paramÃ¨tres de route dynamique et les boutons de navigation sont fonctionnels.<br/>* Un hook a Ã©tÃ© utilisÃ© pour la connexion Ã  Spotify.<br/>* L'application est disponible en franÃ§ais et en anglais.<br/>* Un intercepteur a Ã©tÃ© utilisÃ© pour l'authentification Ã  Spotify|<br/>1 pt<br/>1 pt<br/>3 pts<br/>3 pts<br/>7 pts<br/>2 pts|
|**ğŸ‘¨â€ğŸ¨ Page d'accueil (Artistes)**<br/>* Mini-formulaire de recherche<br/>* RequÃªte Ã  Spotify<br/>* Affichage des artistes<br/>* Artistes sauvegardÃ©s dans le stockage local<br/>* Bouton pour nettoyer le stockage local|<br/>1 pt<br/>3 pts<br/>2 pts<br/>3 pts<br/>1 pt|
|**ğŸ’¿ Page des albums**<br/>* Titre avec nom de l'artiste en haut<br/>* RequÃªte Ã  Spotify<br/>* Affichage des albums (titre et pochette)|<br/>0.666 pt<br/>3 pts<br/>2 pts|
|**ğŸµ Page des chansons**<br/>* Titre avec nom de l'album en haut<br/>* RequÃªte Ã  Spotify<br/>* Affichage des chansons<br/>* Affichage du lecteur YouTube sur demande avec rÃ©sultat valide.|<br/>0.666 pt<br/>3 pts<br/>1 pt<br/>4 pts|
|**ğŸ¤ Page des concerts**<br/>* Titre avec nom de l'artiste en haut<br/>* Affichage des concerts (Date et heure localisÃ©s, pays et ville)<br/>* RequÃªte Ã  BandsInTown<br/>* Message spÃ©cial si aucun concert<br/>* Affichage de la carte Google avec marqueurs|<br/>0.666 pt<br/>4 pts<br/>4 pts<br/>1 pt<br/>4 pts|
|**ğŸ“° Git**<br/>* Au moins 8 commits ont Ã©tÃ© rÃ©alisÃ©s.<br/>* Les commits sont clairs et respectent les conventions du dÃ©partement.<br/>* L'enseignant a Ã©tÃ© invitÃ© en tant que collaborateur.|<br/>1 pt<br/>3 pts<br/>1 pt|
|**â˜¢ PÃ©nalitÃ©s variÃ©es**<br/>* PÃ©nalitÃ© par tranche de 24h de retard entamÃ©e. Oui, cinq minutes, c'est un retard.<br/>* Retard de 6+ jours.<br/>* Interface particuliÃ¨rement dÃ©formÃ©e ou difficile Ã  utiliser.<br/>* Non-respect de conventions de l'architecture Next.js.<br/>* Pas de remise partielle.<br/>* Le projet ne compile pas.|<br/>-10% pts<br/>-100% pts<br/>-10 pts<br/>-10 pts<br/>-15 pts<br/>-15 pts|
|Total|60 pts|
</center>

## ğŸ˜µ Ses tro compliquais

:::warning

N'oubliez pas que **toutes les requÃªtes Spotify** (Connexion, artiste, albums et chansons) sont dÃ©jÃ  codÃ©es pour vous et sont disponibles dans le [Cours 7](/notes/rencontre4.1#-exemples-de-requÃªtes-Ã -spotify-pour-le-tp2). Seule la requÃªte **BandsInTown** sera codÃ©e par vous-mÃªme.

:::

La rÃ©alisation dâ€™un projet **Next.js** avec plusieurs composants peut Ãªtre intimidante. Voici une sÃ©quence suggÃ©rÃ©e (loin dâ€™Ãªtre incontournable) pour avancer dans le projet :

1. ğŸ“¦ CrÃ©er tous les composants dont vous aurez besoin. (Cours 5)
    * N'oubliez pas qu'un **layout** est pratique pour les headers et footers rÃ©pÃ©titifs.
    * â›” Le HTML et le CSS de dÃ©part fournis ne conviennent pas du tout Ã  la structure d'un projet Next.js ! Il faudra tout restructurer
sous forme de composants. Par exemple, n'oubliez pas que les Ã©lÃ©ments `<head>` et `<body>` sont dÃ©jÃ  prÃ©sents dans `layout.tsx`.
    * PrÃ©parez le routage (crÃ©ation des bons dossiers) de votre application. ÃŠtes-vous capable dâ€™accÃ©der Ã  tous les composants que vous avez crÃ©Ã©s en modifiant l'URL ?
2. âš± PrÃ©parer des classes (`/app/_types`) pour encapsuler les donnÃ©es. (Cours 1)
    * Quel type de donnÃ©es aurez-vous Ã  afficher dans vos pages Web ? Vous pourriez dÃ©jÃ  prÃ©parer les classes de vos modÃ¨les en consÃ©quence.
3. âœ… Rendre vos composants fonctionnels, un Ã  la fois. (Cours 5 Ã  8)
    * Le gros du travail ! Un composant Ã  la fois, complÃ©ter lâ€™interface HTML puis rendre fonctionnels les formulaires et requÃªtes qui permettent Ã  lâ€™utilisateur dâ€™interagir avec la page.
    * âš âš âš  GÃ©nÃ©ralement, la dynamique ressemble Ã  ceci quand on navigue vers une autre page :
      1. Un paramÃ¨tre de route contient le **nom** et / ou **l'id Spotify** de lâ€™artiste / lâ€™album Ã  chercher. On tente de rÃ©cupÃ©rer ce paramÃ¨tre.
      2. On lance une requÃªte Ã  lâ€™API appropriÃ©e grÃ¢ce au paramÃ¨tre de route reÃ§u.
      3. On obtient les donnÃ©es dans un objet JSON et on les affiche.
4. ğŸ‘… Internationaliser. (Cours 7)
    * Si tout fonctionne et que vous Ãªtes satisfait(e) de votre application, câ€™est lâ€™heure de tout traduire !
    * Les seuls nouveaux dÃ©fis que vous devriez rencontrer en comparaison avec le labo 7 est la nÃ©cessitÃ© de diviser le layout et la traduction de dates. Ces deux dÃ©fis sont abordÃ©s dans les notes de cours ! 
