# TP3 - Flappy Birb (10%)

<center>![Flappy Birb](../../static/img/tp3/flappyBirb.png)</center>

Le [projet Next.js est fourni](../../static/files/tp3.zip) pour ce TP. Sa structure doit Ãªtre respectÃ©e et complÃ©tÃ©e.

Vous devrez crÃ©er le serveur Web API **Ã  partir de zÃ©ro**. 

Une fois le serveur ASP.NET Core crÃ©Ã©, vous Ãªtes invitÃ©s Ã  immÃ©diatement (**avant votre premier commit**) taper la commande `dotnet new gitignore` en vous situant dans le dossier de votre projet serveur. Sinon, vous pouvez aussi crÃ©er manuellement un fichier nommÃ© `.gitignore` et ajouter trois lignes dedans : `.vs`, `bin` et `obj`.

## ğŸ“¥ Remise
* ğŸ“ OÃ¹ : sur **Git** uniquement (N'oubliez pas l'invitation [https://github.com/MaximePelletier15](https://github.com/MaximePelletier15))
* â° Quand : **18 avril 23h59**. Vous avez 2 cours consacrÃ©s au TP.

## ğŸ“ Consignes

* ğŸŒ Les frameworks **Next.js** et **ASP.NET Core** doivent Ãªtre utilisÃ©s.
* ğŸ‘¤ Le projet doit Ãªtre fait individuellement.
* ğŸ‘½ Attention au **plagiat**. Il est interdit de copier en partie ou complÃ¨tement le code d'une autre personne ou de gÃ©nÃ©rer son code avec l'IA. Le niveau d'usage de l'intelligence artificielle gÃ©nÃ©rative permis pour ce TP est de **1**. (Se rÃ©fÃ©rer au plan de cours)
* ğŸ¥š Vous Ãªtes **obligÃ©s** de crÃ©er un projet **ASP.NET Core** Ã  partir de zÃ©ro. Ne rÃ©utilisez pas un laboratoire.

En rÃ©sumÃ©, nous complÃ¨terons un **projet Web Next.js** et crÃ©erons un **projet Web serveur ASP.NET Core** qui collaboreront ensemble pour proposer un jeu et un systÃ¨me de classement Ã  des joueurs authentifiÃ©s.

:::danger
 
Si votre travail est suspectÃ© de plagiat (code copiÃ© d'un(e) autre Ã©tudiant(e), code gÃ©nÃ©rÃ© par IA, notions non abordÃ©es en classe, etc.), deux choses peuvent se produire :
 
* Le plagiat est prouvÃ© par nos outils : Note de 0, automatiquement.
* Le plagiat est plutÃ´t Ã©vident, mais une validation est requise : vous serez convoquÃ©(e) au bureau de votre enseignant(e). Vous devrez rÃ©pondre Ã  certaines questions pour prouver que vous comprenez et maÃ®trisez le code qui a Ã©tÃ© utilisÃ© dans votre TP. Si vous ne rÃ©ussissez pas Ã  rÃ©pondre Ã  certaines questions, vous aurez la note de 0. (Si vous ne comprenez pas votre propre code, c'est que vous avez plagiÃ©, d'une maniÃ¨re ou d'une autre.)
 
:::

Voici une vue d'ensemble des **requÃªtes** Ã  implÃ©menter :

<center>![RÃ©sumÃ© des requÃªtes Ã  implÃ©menter](../../static/img/tp3/swagger.png)</center>

## ğŸ‘¥ Gestion des utilisateurs

Il faut qu'on puisse s'inscrire, se connecter et se dÃ©connecter. Le fonctionnement doit correspondre Ã  celui enseignÃ© dans ce cours.

<center>![Flappy Birb](../../static/img/tp3/user.png)</center>

## ğŸ† CrÃ©ation de scores 

Comment jouer : `w` pour monter et `e` pour changer de couleur. (On peut traverser les formes de la mÃªme couleur que la perruche)

Il est possible de sauvegarder (crÃ©er) un score aprÃ¨s avoir jouÃ©. Pour savoir quelles sont les propriÃ©tÃ©s d'un score, vÃ©rifiez la question **ğŸ“Š Afficher les scores**. Il faut Ãªtre connectÃ© pour que l'envoi du score fonctionne. (Ce n'est pas grave si la requÃªte Ã©choue, Ã  condition d'Ãªtre dÃ©connectÃ©)

<center>![Jouer Ã  Flappy Birb](../../static/img/tp3/play.png)</center>

:::warning

Il est interdit de mettre une propriÃ©tÃ© pour le **pseudo** dans votre modÃ¨le `Score.cs`. Utilisez un Â« DisplayDTO Â» au besoin.

:::

:::tip

Le client a seulement besoin d'envoyer le **score** et le **chrono** au serveur. La **date**, la **visibilitÃ© par dÃ©faut** et le **propriÃ©taire du score**, le serveur pourra trÃ¨s bien les dÃ©terminer lui-mÃªme.

:::

## ğŸ“Š Afficher les scores

Si on est **authentifiÃ©**, on peut voir nos scores personnels. (Ã€ gauche) En cliquant sur l'oeil ğŸ‘ Ã  cÃ´tÃ© d'un score, on peut le rendre privÃ© / public. C'est **la seule** propriÃ©tÃ© d'un score qui est modifiable.

Qu'on soit **authentifiÃ© ou non**, on peut voir les **10 meilleurs scores publics**, **classÃ©s par score dÃ©croissant**.

:::warning

Lorsqu'on modifie la visibilitÃ© d'un score, trouvez le moyen de mettre Ã  jour immÃ©diatement la liste des scores publics affichÃ©s. Il faut Ã©galement modifier l'oeil ğŸ‘ du score : un oeil biffÃ© veut dire privÃ©, un oeil normal veut dire public.

:::

<center>![Affichage des scores](../../static/img/tp3/scores.png)</center>

## ğŸ¤¬ SupplÃ©ments agaÃ§ants

* ğŸ”’ Lâ€™accÃ¨s aux donnÃ©es et la modification des donnÃ©es doit Ãªtre sÃ©curitaire.
* âš™ Le projet ASP.NET Core doit possÃ©der un service pour les scores. (Interdit d'injecter le **DbContext** dans un contrÃ´leur)
* ğŸ“¶ Un **intercepteur** doit Ãªtre utilisÃ© pour joindre le token dâ€™authentification aux requÃªtes dans le projet Next.js.
* ğŸŒ± Un seed doit Ãªtre complÃ©tÃ© : deux **utilisateurs** et quatre **scores** doivent Ãªtre inclus dans la base de donnÃ©es par dÃ©faut. (Chaque utilisateur doit possÃ©der un score privÃ© et un score public)

:::warning

â›” PrÃ©cision sur un bug mineur connu :

Dans le projet Next.js de dÃ©part, **lorsquâ€™on quitte le composant `Home`**, la page Web est **rÃ©actualisÃ©e**. (Câ€™est nÃ©cessaire pour que lâ€™Ã©tat du jeu ne se duplique pas en revenant plus tard sur `Home`) Lorsqu'on quitte `Home` et quâ€™on va vers `Scores`, on observe des Â« **Request aborted** Â» dans la console : ce n'est pas grave.

:::

## âœ… Grille de correction

<center>
|CritÃ¨re|Points|
|:-|:-|
|**ğŸ‘¥ Gestion des utilisateurs**<br/>* Inscription<br/>* Connexion<br/>* DÃ©connexion|<br/>0.5 pt<br/>0.75 pt<br/>0.25 pt|
|**ğŸ† Gestion des scores**<br/>* CrÃ©ation de scores<br/>* Modifier la visibilitÃ© d'un score<br/>* Afficher les scores publics<br/>* Afficher nos scores personnels|<br/>1 pt<br/>1.25 pt<br/>1 pt<br/>0.75 pt|
|**â›„ Divers**<br/>* L'application est sÃ©curitaire<br/>* Le seed est rÃ©alisÃ© tel que demandÃ©<br/>* Usage d'un service cÃ´tÃ© serveur<br/>* Usage d'un intercepteur|<br/>1 pt<br/>1 pt<br/>1 pt<br/>0.5 pt|
|**ğŸ“° Git**<br/>* Respect des contraintes du cours et dÃ©partementales<br/>* Au moins 5 commits cohÃ©rents<br/>* Enseignant(e) invitÃ©(e) avant la remise|<br/>0.5 pt<br/>0.25 pt<br/>0.25 pt|
|**â˜¢ PÃ©nalitÃ©s possibles**<br/>* Un projet ne compile pas<br/>* PÃ©nalitÃ© par tranche de 24h entamÃ©e<br/>* Retard de 6 jours ou plus<br/>* Interface client Next.js dÃ©formÃ©e ou non respectÃ©e<br/>* RÃ©utilisation d'un labo au lieu d'avoir crÃ©Ã© un projet serveur<br/>* Structure du projet Next.js non respectÃ©e|<br/>-25%<br/>-10%<br/>-100%<br/>-2 pts<br/>-2 pts<br/>-2 pts|
|Total|10 pts|
</center>
